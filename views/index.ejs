<!DOCTYPE html>
<html>
    <head>
        <% include ./partials/head.ejs %>
    </head>
    <body class="container">
        <% var shortDateFormat = "DD-MM-YYYY hh:mm A";%>
        <h1>Calories Tracker</h1>
        <a href="/diets/new"><button type="button" class="btn btn-secondary">New Meal</button></a><br/><br/>
        <div style="display:flex; flex-wrap: wrap;">
            <table class="table table-sm table-dark">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Picture</th>
                        <th scope="col">Date</th>
                        <th scope="col">Food/Drink</th>
                        <th scope="col">Calories</th>
                        <th scope="col">Edit</th>
                        <th scope="col">Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <%for (let i = 0; i < dietModel.length; i++){ %>
                        <tr>
                            <th scope="row"><%= i+1%></th>
                                <td>
                                    <a href="/diets/<%=dietModel[i].id%>"><img class="thumbnail" src="<%= dietModel[i].image %>"></a>
                                </td>
                                <td><%= moment(dietModel[i].consumeTime).format(shortDateFormat) %></td>    
                                <td><%= dietModel[i].foodName %></td>
                                <td><%= dietModel[i].calories %></td>
                                <td>
                                    <a href="/diets/<%=dietModel[i].id%>/edit">
                                        <button type="button" class="btn btn-secondary">
                                            <i class="material-icons md-light">edit</i>
                                        </button>
                                    </a>
                                </td>
                                <td>
                                    <form action="/diets/<%=dietModel[i].id%>?_method=DELETE" method="POST">
                                        <button type="submit" class="btn btn-secondary">
                                            <i class="material-icons md-light">delete</i>
                                        </button>
                                    </form>
                                </td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
                
        </div>
    </body> 
</html>